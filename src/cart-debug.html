<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart Debug - Disha Digital Prints</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-6">ðŸ›’ Cart Debug Tool</h1>
        
        <!-- Test Add to Cart -->
        <div class="bg-white rounded-lg shadow p-6 mb-6">
            <h2 class="text-xl font-bold mb-4">Test Add to Cart</h2>
            
            <div class="space-y-4">
                <button onclick="addTestDocument()" class="w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700">
                    Add Test Document to Cart
                </button>
                
                <button onclick="addTestBusinessCard()" class="w-full bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700">
                    Add Test Business Card to Cart
                </button>
                
                <button onclick="addTestBrochure()" class="w-full bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700">
                    Add Test Brochure to Cart
                </button>
            </div>
        </div>
        
        <!-- Current Cart -->
        <div class="bg-white rounded-lg shadow p-6 mb-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold">Current Cart (<span id="cart-count">0</span> items)</h2>
                <button onclick="clearCart()" class="text-red-600 hover:text-red-700 font-semibold">
                    Clear Cart
                </button>
            </div>
            <div id="cart-display" class="space-y-2 text-sm">
                <p class="text-gray-500">Cart is empty</p>
            </div>
        </div>
        
        <!-- Actions -->
        <div class="bg-white rounded-lg shadow p-6">
            <h2 class="text-xl font-bold mb-4">Actions</h2>
            <div class="flex gap-4">
                <a href="cart.html" class="flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 text-center font-semibold">
                    View Cart Page
                </a>
                <a href="order.html" class="flex-1 bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 text-center font-semibold">
                    Go to Order Page
                </a>
            </div>
        </div>
    </div>

    <script>
        // Test functions
        function addTestDocument() {
            const cart = getCart();
            cart.push({
                id: Date.now(),
                product: 'documents',
                productName: 'A4 Documents',
                files: [{ name: 'test.pdf', pages: 10 }],
                configuration: {
                    paperSize: 'A4',
                    printType: 'Color',
                    sides: 'Single-sided',
                    binding: 'Spiral',
                    quantity: 1
                },
                pages: 10,
                copies: 1,
                pricing: {
                    subtotal: 30,
                    gst: 1.5,
                    grandTotal: 31.5
                },
                total: 31.5,
                addedAt: new Date().toISOString()
            });
            saveCart(cart);
            alert('âœ… Test document added to cart!');
            displayCart();
        }

        function addTestBusinessCard() {
            const cart = getCart();
            cart.push({
                id: Date.now(),
                product: 'business-cards',
                productName: 'Business Cards',
                designMethod: 'template',
                selectedTemplate: 'modern',
                configuration: {
                    material: '300gsm',
                    finish: 'matte',
                    corners: 'sharp',
                    sides: 'single',
                    quantity: 100
                },
                quantity: 100,
                pricing: {
                    subtotal: 300,
                    gst: 15,
                    grandTotal: 315
                },
                total: 315,
                addedAt: new Date().toISOString()
            });
            saveCart(cart);
            alert('âœ… Test business card added to cart!');
            displayCart();
        }

        function addTestBrochure() {
            const cart = getCart();
            cart.push({
                id: Date.now(),
                product: 'brochures',
                productName: 'Brochures',
                files: [{ name: 'brochure.pdf', size: 1024000 }],
                configuration: {
                    brochureSize: 'a4',
                    pages: 4,
                    foldType: 'bi-fold',
                    paperQuality: '130gsm',
                    finish: 'matte',
                    quantity: 50
                },
                quantity: 50,
                pricing: {
                    subtotal: 400,
                    gst: 20,
                    grandTotal: 420
                },
                total: 420,
                addedAt: new Date().toISOString()
            });
            saveCart(cart);
            alert('âœ… Test brochure added to cart!');
            displayCart();
        }

        function getCart() {
            const cart = sessionStorage.getItem('cart');
            return cart ? JSON.parse(cart) : [];
        }

        function saveCart(cart) {
            sessionStorage.setItem('cart', JSON.stringify(cart));
        }

        function clearCart() {
            if (confirm('Clear all items from cart?')) {
                sessionStorage.removeItem('cart');
                alert('âœ… Cart cleared!');
                displayCart();
            }
        }

        function displayCart() {
            const cart = getCart();
            const display = document.getElementById('cart-display');
            const countEl = document.getElementById('cart-count');
            
            countEl.textContent = cart.length;
            
            if (cart.length === 0) {
                display.innerHTML = '<p class="text-gray-500">Cart is empty</p>';
                return;
            }
            
            display.innerHTML = cart.map((item, index) => `
                <div class="border border-gray-200 rounded p-3">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="font-semibold">${item.productName}</p>
                            <p class="text-gray-600 text-xs">Quantity: ${item.quantity || item.copies || 1}</p>
                            <p class="text-green-600 font-semibold">â‚¹${item.total.toFixed(2)}</p>
                        </div>
                        <button onclick="removeItem(${index})" class="text-red-600 hover:text-red-700 text-xs font-semibold">
                            Remove
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function removeItem(index) {
            const cart = getCart();
            cart.splice(index, 1);
            saveCart(cart);
            displayCart();
        }

        // Initialize
        displayCart();
        
        console.log('ðŸ”§ Cart Debug Tool Ready');
        console.log('Current cart:', getCart());
    </script>
</body>
</html>
